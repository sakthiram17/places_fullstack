{"version":3,"sources":["shared/context/auth-context.js","shared/components/UIElements/LoadingSpinner.js","shared/components/UIElements/Backdrop.js","shared/hooks/auth-hook.js","shared/components/Navigation/MainHeader.js","shared/components/Navigation/NavLinks.js","shared/components/Navigation/SideDrawer.js","shared/components/Navigation/MainNavigation.js","App.js","index.js"],"names":["AuthContext","createContext","isLoggedIn","userId","login","logout","LoadingSpinner","props","className","asOverlay","Backdrop","ReactDOM","createPortal","onClick","document","getElementById","logoutTimer","MainHeader","children","NavLinks","auth","useContext","url","exact","to","SideDrawer","content","CSSTransition","in","show","timeout","classNames","mountOnEnter","unmountOnExit","MainNavigation","useState","drawerIsOpen","setDrawerIsOpen","closeDrawer","Fragment","style","color","Users","React","lazy","NewPlace","UserPlaces","UpdatePlace","Auth","App","routes","token","setToken","tokenExpirationDate","setTokenExpirationDate","setUserId","useCallback","uid","expirationDate","Date","getTime","localStorage","setItem","JSON","stringify","expiration","toISOString","removeItem","useEffect","remainingTime","setTimeout","clearTimeout","storedData","parse","getItem","useAuth","path","Provider","value","fallback","render"],"mappings":"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","file":"static/js/main.85358d61.chunk.js","sourcesContent":["import { createContext } from \"react\";\r\nexport const AuthContext = createContext({\r\nisLoggedIn:false,\r\nuserId:null,\r\nlogin: ()=>{},\r\nlogout: ()=>{}\r\n\r\n})\r\n","import React from 'react';\n\nimport './LoadingSpinner.css';\n\nconst LoadingSpinner = props => {\n  return (\n    <div className={`${props.asOverlay && 'loading-spinner__overlay'}`}>\n      <div className=\"lds-dual-ring\"></div>\n    </div>\n  );\n};\n\nexport default LoadingSpinner;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport './Backdrop.css';\n\nconst Backdrop = props => {\n  return ReactDOM.createPortal(\n    <div className=\"backdrop\" onClick={props.onClick}></div>,\n    document.getElementById('backdrop-hook')\n  );\n};\n\nexport default Backdrop;\n","import { useState, useCallback, useEffect } from 'react';\r\nimport {useHistory} from 'react-router-dom'\r\nlet logoutTimer;\r\n\r\nexport const useAuth = () => {\r\n  \r\n  const [token, setToken] = useState(false);\r\n  const [tokenExpirationDate, setTokenExpirationDate] = useState();\r\n  const [userId, setUserId] = useState(false);\r\n\r\n  const login = useCallback((uid, token, expirationDate) => {\r\n    setToken(token);\r\n    setUserId(uid);\r\n    const tokenExpirationDate =\r\n      expirationDate || new Date(new Date().getTime() + 1000 * 60 * 60);\r\n    setTokenExpirationDate(tokenExpirationDate);\r\n    localStorage.setItem(\r\n      'userData',\r\n      JSON.stringify({\r\n        userId: uid,\r\n        token: token,\r\n        expiration: tokenExpirationDate.toISOString()\r\n      })\r\n    );\r\n  }, []);\r\n\r\n  const logout = useCallback(() => {\r\n    setToken(null);\r\n    setTokenExpirationDate(null);\r\n    setUserId(null);\r\n    localStorage.removeItem('userData');\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    if (token && tokenExpirationDate) {\r\n      const remainingTime = tokenExpirationDate.getTime() - new Date().getTime();\r\n      logoutTimer = setTimeout(logout, remainingTime);\r\n    } else {\r\n      clearTimeout(logoutTimer);\r\n    }\r\n  }, [token, logout, tokenExpirationDate]);\r\n\r\n  useEffect(() => {\r\n    const storedData = JSON.parse(localStorage.getItem('userData'));\r\n    if (\r\n      storedData &&\r\n      storedData.token &&\r\n      new Date(storedData.expiration) > new Date()\r\n    ) {\r\n      login(storedData.userId, storedData.token, new Date(storedData.expiration));\r\n    }\r\n  }, [login]);\r\n\r\n  return { token, login, logout, userId };\r\n};","import React from \"react\";\r\nimport \"./MainHeader.css\"\r\nconst MainHeader = (props)=>{\r\n    return(\r\n        <header className=\"main-header\">\r\n            {props.children}\r\n        </header>\r\n    )\r\n}\r\nexport default MainHeader;","import React ,{useContext} from \"react\";\r\nimport {NavLink} from 'react-router-dom';\r\n\r\nimport {AuthContext} from \"../../../shared/context/auth-context\"\r\nimport \"./NavLinks.css\"\r\nconst NavLinks = (props)=>{\r\n    const auth = useContext(AuthContext);\r\n    let url = `${auth.userId}/places`\r\n\r\n    return ( <ul className=\"nav-links\">\r\n            <li>\r\n                <NavLink exact to =\"/\">All USERS</NavLink>\r\n            </li>\r\n           {auth.isLoggedIn && <li>\r\n                <NavLink to = {url}>MY PLACES</NavLink>\r\n            </li>}\r\n             {auth.isLoggedIn &&<li>\r\n                <NavLink to =\"/places/new\">ADD PLACE</NavLink>\r\n            </li>}\r\n            {!auth.isLoggedIn &&<li>\r\n                <NavLink to =\"/auth\">AUTHENTICATE</NavLink>\r\n            </li>}\r\n            {auth.isLoggedIn && <li>\r\n                <button onClick={auth.logout}>LOGOUT</button>\r\n            </li>\r\n\r\n            }\r\n        </ul>\r\n        )\r\n\r\n}\r\nexport default NavLinks;","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport \"./SideDrawer.css\";\r\nimport { CSSTransition } from \"react-transition-group\";\r\n\r\nconst SideDrawer = (props)=>{\r\n    const content =  \r\n        <CSSTransition \r\n        in = {props.show} \r\n        timeout= {200}\r\n        classNames = \"slide-in-left\" \r\n        mountOnEnter \r\n        unmountOnExit\r\n        >\r\n        <aside className=\"side-drawer\" onClick={props.onClick}>{props.children}</aside>\r\n        </CSSTransition>\r\n    return ReactDOM.createPortal(content,document.getElementById('drawer-hook'))\r\n}\r\n\r\nexport default SideDrawer;","import React, {useState,useReducer}from \"react\";\r\nimport \"./MainNavigation.css\"\r\nimport MainHeader from \"./MainHeader\";\r\nimport { Link } from \"react-router-dom\";\r\nimport NavLinks from \"./NavLinks\";\r\nimport SideDrawer from \"./SideDrawer\";\r\nimport Backdrop from \"../UIElements//Backdrop\"\r\nconst MainNavigation = (props)=>{\r\n    const [drawerIsOpen,setDrawerIsOpen] = useState(false);\r\n    const openDrawer = ()=>{\r\n        setDrawerIsOpen(true)\r\n    }\r\n    const closeDrawer = ()=>{\r\n        setDrawerIsOpen(false)\r\n    }\r\n    \r\n    return(\r\n        <React.Fragment>\r\n        {drawerIsOpen && <Backdrop onClick = {closeDrawer}></Backdrop>}\r\n        <SideDrawer show = {drawerIsOpen} onClick = {closeDrawer}>\r\n            <nav className=\"main-navigation__drawer-nav\">\r\n                <NavLinks></NavLinks>\r\n            </nav>\r\n        </SideDrawer>\r\n        <MainHeader>\r\n            <button className=\"main-navigation__menu-btn\" onClick = {openDrawer}>\r\n                <span/>\r\n                <span/>\r\n                <span/>\r\n            </button>\r\n            <h1 className=\"main-navigation__title\">\r\n                <Link to =\"/\"><span style = {{color:\"whitesmoke\"}}>Places</span>Explorer</Link>\r\n            </h1>\r\n            <nav className=\"main-navigation__header-nav\">\r\n                <NavLinks></NavLinks>\r\n            </nav>\r\n            \r\n        </MainHeader></React.Fragment>\r\n    )\r\n}\r\nexport default MainNavigation;\r\n","import React, { useEffect , Suspense } from 'react';\nimport {AuthContext} from './shared/context/auth-context';\nimport {BrowserRouter as Router,Route,Redirect,Switch} from 'react-router-dom';\nimport MainNavigation from './shared/components/Navigation/MainNavigation';\nimport { useState } from 'react';\nimport { useCallback } from 'react';\nimport {useAuth} from './shared/hooks/auth-hook'\nimport LoadingSpinner from './shared/components/UIElements/LoadingSpinner'\n\nlet logoutTimer;\nconst Users = React.lazy(()=>import('./User/pages/User'))\nconst NewPlace =  React.lazy(()=>import('./Places/pages/NewPlaces'))\nconst UserPlaces =  React.lazy(()=>import('./Places/pages/UserPlaces'))\nconst UpdatePlace =  React.lazy(()=>import('./Places/pages/UpdatePlace'))\nconst Auth = React.lazy(()=>import('./User/pages/Auth'))\nconst App = ()=> {\n  const {token,login,logout,userId} = useAuth()\n  let routes;\n  if(!!token)\n  {\n    routes = <Switch>\n    <Route path = \"/\" exact><Users></Users></Route>\n    <Route path = \"/places/new\" exact><NewPlace></NewPlace></Route>\n    \n    <Route path = \"/places/:placeId\" exact>\n    <UpdatePlace></UpdatePlace>\n    </Route>\n    <Route  exact path = \"/:userId/places\">\n      <UserPlaces></UserPlaces>\n    </Route>\n    <Redirect to = \"/\"></Redirect>\n\n\n\n    </Switch>\n\n  }\n  else{\n   routes =  <Switch>\n    <Route path = \"/\" exact><Users></Users></Route>\n    <Route  exact path = \"/:userId/places\"><UserPlaces></UserPlaces></Route>\n    <Route path = \"/auth\" exact>\n      <Auth></Auth>\n    </Route>\n    <Redirect to = \"/\"></Redirect>\n\n    </Switch>\n      \n   }\n\n\n  return(\n    <AuthContext.Provider value = {{isLoggedIn:!!token,login:login,logout:logout,userId:userId,token:token}}>\n    <Router>\n      <main>\n      <Suspense fallback = {\n        <div className='center'>\n          <LoadingSpinner></LoadingSpinner>\n        </div>\n      }>\n      <MainNavigation></MainNavigation>\n \n      {routes}\n      </Suspense>\n        </main>\n    </Router></AuthContext.Provider>\n  )\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}